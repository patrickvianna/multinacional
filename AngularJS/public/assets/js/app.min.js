"use strict";angular.module("myApp",["ngAnimate","ui.router","toastr","ngTouch","ui.bootstrap","ui.mask","textAngular"]);
"use strict";angular.module("myApp").constant("consts",{appName:"Ecommerce - ES2",version:"1.0",owner:"Patrick",year:"2018",site:"",apiUrl:"https://ecommerce-es2.appspot.com/api",oapiUrl:"https://ecommerce-es2.appspot.com/oapi",userKey:"_my_app_user"}).run(["$rootScope","consts",function(e,o){e.consts=o}]);
"use strict";angular.module("myApp").config(["$stateProvider","$urlRouterProvider","$httpProvider",function(e,t,r){e.state("newCustomer",{url:"/newCustomer",templateUrl:"template/customer/registerCustomer.html"}).state("login",{url:"/login",templateUrl:"template/login.html"}).state("dashboard",{url:"/dashboard",templateUrl:"template/dashboard.html"}).state("searchCustomer",{url:"/searchCustomer",templateUrl:"template/customer/searchCustomer.html"}).state("viewCustomer",{url:"/viewCustomer/:id",templateUrl:"template/customer/viewCustomer.html"}).state("updateCustomer",{url:"/updateCustomer/:id",templateUrl:"template/customer/updateCustomer.html"}).state("registerProduct",{url:"/registerProduct",templateUrl:"template/product/registerProduct.html"}).state("searchProduct",{url:"/searchProduct",templateUrl:"template/product/searchProduct.html"}).state("viewProduct",{url:"/viewProduct/:id",templateUrl:"template/product/viewProduct.html"}).state("updateProduct",{url:"/updateProduct/:id",templateUrl:"template/product/updateProduct.html"}).state("newFornecedor",{url:"/newFornecedor",templateUrl:"template/fornecedor/registerFornecedor.html"}).state("searchFornecedor",{url:"/searchFornecedor",templateUrl:"template/fornecedor/searchFornecedor.html"}).state("viewFornecedor",{url:"/viewFornecedor/:id",templateUrl:"template/fornecedor/viewFornecedor.html"}).state("updateFornecedor",{url:"/updateFornecedor/:id",templateUrl:"template/fornecedor/updateFornecedor.html"}).state("selling",{url:"/selling",templateUrl:"template/selling.html"}).state("buying",{url:"/buying",templateUrl:"template/buying.html"}).state("viewTransaction",{url:"/viewTransaction/:tipo/:id",templateUrl:"template/viewTransaction.html"}),t.otherwise("/dashboard")}]).run(["$rootScope","$http","$location","$window","auth",function(e,t,r,l,a){r.path("/dashboard")}]);
"use strict";angular.module("myApp").component("customerModal",{template:'<div class="modal-header">\n    <button type="button" ng-click="$ctrl.handleDismiss()" class="close" data-dismiss="modal" aria-label="Close">\n      <span aria-hidden="true">×</span></button>\n    <h2 class="modal-title">Buscar cliente</h2>\n  </div>\n\x3c!-- HEADER --\x3e\n\n<div class="jumbotron margem-detail">\n    \x3c!--button type="button" class="close" data-dismiss="modal" aria-label="Close">\n    <span aria-hidden="true">×</span></button--\x3e\n    <div class="modal-body">\n\n    <h2>Cliente</h2>\n        <form class="form-inline" ng-submit="$ctrl.searchCustomer()">\n            <div class="form-group">\n                <div class="row">\n                    <div class="col-md-4">\n                        <label class="sr-only" for="inlineFormInputGroup">ID</label>\n                        <input type="text" ng-model="$ctrl.Filter.id" class="form-control" placeholder="ID"/>\n                    </div>\n                    <div class="col-md-4">\n                        <label class="sr-only" for="inlineFormInputGroup">NOME</label>\n                        <input type="text" ng-model="$ctrl.Filter.name" class="form-control" placeholder="Nome"/>\n                    </div>\n                    \n                    <div class="col-md-4">\n                        <button class="btn btn-small btn-primary" >Buscar</button>\n                    </div>\n                </div>           \n            </div>\n        </form>\n        \n        <table class="table" ng-show="$ctrl.lista.value.length > 0">\n            <thead class="thead-light">\n                <tr>\n                    <th >ID</a></th>\n                    <th>Nome</a></th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="item in $ctrl.lista.value track by $index"> \x3c!-- | filter: {titulo: criterioDeBusca} | filter: {status: selectedStatus} --\x3e\n                    <td>{{item.id}}</td>\n                    <td>{{item.name}}</td>\n                                        \n                    <td><a ng-click="$ctrl.handleClose(item.id, item.name)" class="btn btn-small btn-primary">Selecionar</a></td>\n\n                </tr>\n            </tbody>\n        </table>\n</div>\n</div>\n\n\x3c!-- FOOTER --\x3e\n\x3c!--div class="modal-footer">\n    <button type="button" ng-click="$ctrl.handleClose()" class="btn btn-default pull-left" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary">Save changes</button>\n  </div--\x3e',bindings:{$close:"&",$dismiss:"&",modalData:"<"},controller:["$http","consts","Customer",function(t,n,l){var e=this;e.Filter={id:"",name:""},e.searchCustomer=function(){var t=l.searchCustomer(e.Filter.id,e.Filter.name);e.lista=t.$$state},e.handleClose=function(t,n){e.$close({result:{id:t,name:n}})},e.handleDismiss=function(){e.$dismiss({reason:"cancel"})}}]});
"use strict";angular.module("myApp").component("fornecedorModal",{template:'<div class="modal-header">\n    <button type="button" ng-click="$ctrl.handleDismiss()" class="close" data-dismiss="modal" aria-label="Close">\n      <span aria-hidden="true">×</span></button>\n    <h2 class="modal-title">Buscar fornecedor</h2>\n  </div>\n\x3c!-- HEADER --\x3e\n\n<div class="jumbotron margem-detail">\n    \x3c!--button type="button" class="close" data-dismiss="modal" aria-label="Close">\n    <span aria-hidden="true">×</span></button--\x3e\n    <div class="modal-body">\n\n    <h2>Fornecedor</h2>\n\n    <form  ng-submit="$ctrl.searchFornecedor()">\n            <div class="form-group">\n                <div class="row">\n                    <div class="col-md-4">\n                        ID : <input type="text" ng-model="$ctrl.Filter.id" class="form-control" />\n                    </div>\n                    <div class="col-md-4">\n                        Razão Social : <input type="text" ng-model="$ctrl.Filter.razaoSocial" class="form-control" />\n                    </div>\n                    <div class="col-md-4"  style="padding-top: 2%;">\n                        <button class="btn btn-small btn-primary">Filtrar</button>\n                    </div>\n                </div>   \n                         \n            </div>\n        </form>\n        \n       \n        <div class="table-responsive"></div>\n        <table class="table" ng-show="$ctrl.lista.value.length > 0">\n            <thead class="thead-light">\n                <tr>\n                    <th >ID</a></th>\n                    <th>Razão Social</a></th>\n                    <th>CNPJ</a></th>\n                    <th>Telefone</a></th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="item in $ctrl.lista.value track by $index"> \x3c!-- | filter: {titulo: criterioDeBusca} | filter: {status: selectedStatus} --\x3e\n                    <td>{{item.ID}}</td>\n                    <td>{{item.RAZAO_SOCIAL}}</td>\n                    <td>{{item.CNPJ}}</td>\n                    <td>{{item.TELEFONE}}</td>\n                    <td><a ng-click="$ctrl.handleClose(item.ID, item.RAZAO_SOCIAL, item.CNPJ, item.TELEFONE)" class="btn btn-small btn-primary">Selecionar</a></td>\n                </tr>\n            </tbody>\n        </table>\n</div>\n</div>\n\n\x3c!-- FOOTER --\x3e\n\x3c!--div class="modal-footer">\n    <button type="button" ng-click="$ctrl.handleClose()" class="btn btn-default pull-left" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary">Save changes</button>\n  </div--\x3e',bindings:{$close:"&",$dismiss:"&",modalData:"<"},controller:["$http","consts","Fornecedor",function(t,n,e){var l=this;l.Filter={id:"",name:""},l.searchFornecedor=function(){var t=e.searchFornecedor(l.Filter.id,l.Filter.name);l.lista=t.$$state},l.handleClose=function(t,n,e,a){l.$close({result:{id:t,name:n,unitValue:e,stock:a}})},l.handleDismiss=function(){l.$dismiss({reason:"cancel"})}}]});
"use strict";angular.module("myApp").component("productModal",{template:'<div class="modal-header">\n    <button type="button" ng-click="$ctrl.handleDismiss()" class="close" data-dismiss="modal" aria-label="Close">\n      <span aria-hidden="true">×</span></button>\n    <h2 class="modal-title">Buscar produto</h2>\n  </div>\n\x3c!-- HEADER --\x3e\n\n<div class="jumbotron margem-detail">\n    \x3c!--button type="button" class="close" data-dismiss="modal" aria-label="Close">\n    <span aria-hidden="true">×</span></button--\x3e\n    <div class="modal-body">\n\n    <h2>Produto</h2>\n        <form class="form-inline" ng-submit="$ctrl.searchProduct()">\n            <div class="form-group">\n                <div class="row">\n                    <div class="col-md-4">\n                        <label class="sr-only" for="inlineFormInputGroup">ID</label>\n                        <input type="text" ng-model="$ctrl.Filter.id" class="form-control" placeholder="ID"/>\n                    </div>\n                    <div class="col-md-4">\n                        <label class="sr-only" for="inlineFormInputGroup">NOME</label>\n                        <input type="text" ng-model="$ctrl.Filter.name" class="form-control" placeholder="Nome"/>\n                    </div>\n                    \n                    <div class="col-md-4">\n                        <button class="btn btn-small btn-primary" >Buscar</button>\n                    </div>\n                </div>           \n            </div>\n        </form>\n        \n        <table class="table" ng-show="$ctrl.lista.value.length > 0">\n            <thead class="thead-light">\n                <tr>\n                    <th >ID</a></th>\n                    <th>Nome</a></th>\n                    <th>Valor unitário</th>\n                    <th>Estoque</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="item in $ctrl.lista.value track by $index"> \x3c!-- | filter: {titulo: criterioDeBusca} | filter: {status: selectedStatus} --\x3e\n                    <td>{{item.id}}</td>\n                    <td>{{item.name}}</td>\n                    <td>{{item.unitValue}}</td>\n                    <td>{{item.stock}}</td>\n                                        \n                    <td><a ng-click="$ctrl.handleClose(item.id, item.name, item.unitValue, item.stock)" class="btn btn-small btn-primary">Selecionar</a></td>\n\n                </tr>\n            </tbody>\n        </table>\n</div>\n</div>\n\n\x3c!-- FOOTER --\x3e\n\x3c!--div class="modal-footer">\n    <button type="button" ng-click="$ctrl.handleClose()" class="btn btn-default pull-left" data-dismiss="modal">Close</button>\n    <button type="button" class="btn btn-primary">Save changes</button>\n  </div--\x3e',bindings:{$close:"&",$dismiss:"&",modalData:"<"},controller:["$http","consts","Product",function(t,n,l){var e=this;e.Filter={id:"",name:""},e.searchProduct=function(){var t=l.searchProduct(e.Filter.id,e.Filter.name);e.lista=t.$$state},e.handleClose=function(t,n,l,a){e.$close({result:{id:t,name:n,unitValue:l,stock:a}})},e.handleDismiss=function(){e.$dismiss({reason:"cancel"})}}]});
"use strict";angular.module("myApp").controller("BuyCtrl",["$scope","$http","consts","Msg","$state","$uibModal","Customer","Transaction",function(o,t,r,e,d,c,u,n){var a=this;function l(o,t,r,e,d,c){return{id:"",name:"",unitValue:"",stock:"",qtd:"",total:""}}a.Fornecedor={id:"",name:"",phone:"",address:""},a.listProduct=[],a.Filter={id:"",name:""},a.addProduct=function(){if(a.Product.qtd<=0||""==a.Product.qtd)e.addInfo("O produto tem que ter uma quantidade");else{var t=!1;if(a.listProduct.forEach(function(o){a.Product.id==o.id&&(e.addInfo("Você já adicionou esse produto"),t=!0)}),!t){a.Product.total=a.Product.unitValue*a.Product.qtd;var o=new l(a.Product.id,a.Product.name,a.Product.unitValue,a.Product.stock);o=angular.copy(a.Product),a.listProduct.push(o),a.Product.id="",a.Product.name="",a.Product.unitValue="",a.Product.qtd="",a.Product.stock="",a.Product.total="",i()}}},a.changeTotal=function(){a.Product.total=a.Product.unitValue*a.Product.qtd},a.deleteProduct=function(t){a.listProduct.forEach(function(o){o.id==t&&a.listProduct.splice(o,1)}),i()};var i=function(){0<a.listProduct.length?(a.total=0,a.listProduct.forEach(function(o){a.total+=o.total})):a.total=0};a.buy=function(){if(""!=a.Fornecedor.id)if(a.listProduct.length<=0)e.addInfo("Para finalizar a venda selecione pelo menos 1 produto");else{i();var o=n.buy(a.Fornecedor,a.listProduct,a.total);o?(e.addSucess("Compra realizada com sucesso"),d.go("dashboard")):e.addError("Houve algo de errado, não foi possível completar a compra")}else e.addInfo("Para finalizar a venda selecione o fornecedor")},a.getProduct=function(){c.open({template:'<product-modal /*tarefa="$ctrl.tarefa"*/ $close="$close(result)" $dismiss="$dismiss(reason)"></product-modal>',controller:[function(){}],controllerAs:"$ctrl",size:"lg",resolve:{}}).result.then(function(o){a.Product=new l(o.id,o.name,o.unitValue,o.stock),a.Product.id=o.id,a.Product.name=o.name,a.Product.unitValue=o.unitValue,a.Product.stock=o.stock},function(o){})},a.getFornecedor=function(){c.open({template:'<fornecedor-modal /*tarefa="$ctrl.tarefa"*/ $close="$close(result)" $dismiss="$dismiss(reason)"></fornecedor-modal>',controller:[function(){}],controllerAs:"$ctrl",size:"lg",resolve:{}}).result.then(function(o){a.Fornecedor=o},function(o){})}}]);
"use strict";angular.module("myApp").controller("CustomerCtrl",["$scope","$http","consts","Msg","$state","Customer",function(t,e,o,r,s,n){var u=this;u.Customer={id:0,name:"",phone:"",address:""},u.Filter={id:"",name:""},u.lista={a:0},u.registerCustomer=function(){var e=n.registerCustomer(u.Customer.name,u.Customer.phone,u.Customer.address,1,4);e?(r.addSucess("Cliente inserido"),u.Customer.name="",u.Customer.phone="",u.Customer.address=""):r.addError("Houve um erro ao inserir o cliente"),t.contatoForm.$setPristine()},u.user={login:0,senha:1},t.maskTel="(99)99999-9999",u.searchCustomer=function(){n.searchCustomer(u.Filter.id,u.Filter.name).then(function(e){u.lista=e.data},function(e){r.addError(e)})},u.goToViewCustomer=function(e){s.go("viewCustomer",{id:e})},u.goToUpdateCustomer=function(e){s.go("updateCustomer",{id:e})},u.deleteCustomer=function(e,t){var o=n.deleteCustomer(e,t);o?(u.searchCustomer(),r.addSucess("Cliente deletado")):r.addError("Não foi possível excluir o cliente")}}]);
"use strict";angular.module("myApp").controller("DashboardCtrl",["$scope","$http","consts","Msg","$state","$uibModal","$q","Transaction","Vendedor",function(e,n,t,d,a,o,s,r,i){var l=this;l.lista={},l.vendedores={lista:[],selectedOption:{id:"",name:""}},l.visualizar=function(e,n){a.go("viewTransaction",{tipo:n,id:e})},l.getAllTransactions=function(){r.getAllTransactions().then(function(e){l.lista=e.data})},l.getVendedores=function(){return s(function(e,n){var t=i.getAll();l.vendedores.lista=t.$$state,l.vendedores.selectedOption=l.vendedores.lista[0],e()})},l.getVendedorVenda=function(){null!=l.vendedores.selectedOption.id&&i.getVendedorVenda(l.vendedores.selectedOption.id).then(function(e){l.lista=e.data,e.data.length<1&&d.addInfo("Esse vendedor ainda não tem venda")})},l.estornar=function(e){r.estornar(e)?d.addSucess("Venda estornada!"):d.addError("Houve algo de errado, não foi possível estornar a venda")},l.getVendedores(),l.getAllTransactions()}]);
"use strict";angular.module("myApp").controller("FornecedorCtrl",["$scope","$http","consts","Msg","$state","Fornecedor",function(o,e,r,n,d,c){var a=this;a.Fornecedor={id:0,razaoSocial:"",cnpj:"",telefone:"",address:""},a.Filter={id:"",razaoSocial:""},a.lista={a:0},o.maskTel="(99)9999-9999",o.maskCnpj="99.999.999/9999-99",a.registerFornecedor=function(){var e=c.registerFornecedor(a.Fornecedor.razaoSocial,a.Fornecedor.cnpj,a.Fornecedor.telefone,a.Fornecedor.address);e?(n.addSucess("Fornecedor inserido"),a.Fornecedor.razaoSocial="",a.Fornecedor.cnpj="",a.Fornecedor.telefone="",a.Fornecedor.address=""):n.addError("Houve um erro ao inserir o fornecedor"),o.contatoForm.$setPristine()},a.user={login:0,senha:1},a.searchFornecedor=function(){var e=c.searchFornecedor(a.Filter.id,a.Filter.razaoSocial);a.lista=e.$$state},a.goToViewFornecedor=function(e){d.go("viewFornecedor",{id:e})},a.goToUpdateFornecedor=function(e){d.go("updateFornecedor",{id:e})},a.deleteFornecedor=function(e){var o=c.deleteFornecedor(e);o?(a.searchFornecedor(),n.addSucess("Fornecedor deletado")):n.addError("Não foi possível excluir o fornecedor")}}]);
"use strict";angular.module("myApp").controller("LoginCtrl",["$http","Msg","Url","auth","$location","$window",function(o,n,a,t,e,r){var i=this;i.loginMode=!0,i.user={login:"",senha:""},i.Cadastro={name:"",telefone:"",login:"",senha:"",senhaConfirma:""},i.logar=function(){e.path("/dashboard")},i.changeMode=function(){i.loginMode=!i.loginMode,i.Cadastro.name="",i.Cadastro.telefone="",i.Cadastro.login="",i.Cadastro.senha="",i.Cadastro.senhaConfirma="",i.user.login="",i.user.senha=""},i.logout=function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;t.logout(function(){return e.path("/")}),e.path("/"),1==(o+=1)&&i.logout(o)},i.getUser=function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return t.getUser(o)}}]);
"use strict";angular.module("myApp").controller("ProductCtrl",["$scope","$http","consts","Msg","$state","Product",function(o,t,r,e,d,u){var c=this;c.Product={id:0,name:"",unitValue:"",stock:""},c.Filter={id:"",name:""},c.lista={a:0},c.registerProduct=function(){var t=u.registerProduct(c.Product.name,c.Product.unitValue);t?(e.addSucess("Produto inserido"),c.Product.name="",c.Product.unitValue=""):e.addError("Houve um erro ao inserir o produto"),o.contatoForm.$setPristine()},c.searchProduct=function(){var t=u.searchProduct(c.Filter.id,c.Filter.name);c.lista=t.$$state},c.goToViewProduct=function(t){d.go("viewProduct",{id:t})},c.goToUpdateProduct=function(t){d.go("updateProduct",{id:t})},c.deleteProduct=function(t){var o=u.deleteProduct(t);o?(c.searchProduct(),e.addSucess("Produto deletado")):e.addError("Não foi possível excluir o produto")}}]);
"use strict";angular.module("myApp").controller("SellCtrl",["$scope","$http","consts","Msg","$state","$uibModal","Customer","Transaction",function(t,o,e,r,u,d,c,a){var n=this;function l(t,o,e,r,u,d){return{id:"",name:"",unitValue:"",stock:"",qtd:"",total:""}}n.Customer={id:"",name:"",phone:"",address:""},n.listProduct=[],n.total=0,n.Filter={id:"",name:""},n.addProduct=function(){if(n.Product.qtd<=0||""==n.Product.qtd)r.addInfo("O produto tem que ter uma quantidade");else{var o=!1;if(n.listProduct.forEach(function(t){n.Product.id==t.id&&(r.addInfo("Você já adicionou esse produto"),o=!0)}),!o)if(n.Product.qtd>n.Product.stock)r.addInfo("Estoque insuficiente");else{n.Product.total=n.Product.unitValue*n.Product.qtd;var t=new l(n.Product.id,n.Product.name,n.Product.unitValue,n.Product.stock);t=angular.copy(n.Product),n.listProduct.push(t),n.Product.id="",n.Product.name="",n.Product.unitValue="",n.Product.qtd="",n.Product.stock="",n.Product.total="",s()}}},n.changeTotal=function(){n.Product.total=n.Product.unitValue*n.Product.qtd},n.deleteProduct=function(o){n.listProduct.forEach(function(t){t.id==o&&n.listProduct.splice(t,1)}),s()};var s=function(){0<n.listProduct.length?(n.total=0,n.listProduct.forEach(function(t){n.total+=t.total})):n.total=0};n.sell=function(){if(""!=n.Customer.id)if(n.listProduct.length<=0)r.addInfo("Para finalizar a venda selecione pelo menos 1 produto");else{s();var t=JSON.parse(localStorage.getItem(e.userKey)).id,o=a.sell(n.Customer,n.listProduct,t,n.total);o?(r.addSucess("Venda realizada com sucesso"),u.go("dashboard")):r.addError("Houve algo de errado, não foi possível completar a venda")}else r.addInfo("Para finalizar a venda selecione o cliente")},n.getProduct=function(){d.open({template:'<product-modal /*tarefa="$ctrl.tarefa"*/ $close="$close(result)" $dismiss="$dismiss(reason)"></product-modal>',controller:[function(){}],controllerAs:"$ctrl",size:"lg",resolve:{}}).result.then(function(t){n.Product=new l(t.id,t.name,t.unitValue,t.stock),n.Product.id=t.id,n.Product.name=t.name,n.Product.unitValue=t.unitValue,n.Product.stock=t.stock},function(t){})},n.getCustomer=function(){d.open({template:'<customer-modal /*tarefa="$ctrl.tarefa"*/ $close="$close(result)" $dismiss="$dismiss(reason)"></customer-modal>',controller:[function(){}],controllerAs:"$ctrl",size:"lg",resolve:{}}).result.then(function(t){n.Customer=t},function(t){})}}]);
"use strict";angular.module("myApp").controller("ViewCustomerCtrl",["$scope","$http","consts","Msg","$state","Customer","$stateParams",function(e,t,s,o,r,a,u){var i,d,m=this;m.Customer={id:0,name:"",phone:"",address:""},m.Filter={id:"",name:""},m.user={login:0,senha:1},e.maskTel="(99)99999-9999",m.updateCustomer=function(){a.updateCustomer(m.Customer)?(o.addSucess("O cliente foi alterado"),r.go("searchCustomer")):o.addError("Não foi possível atualizar os dados do cliente"),e.contatoForm.$setPristine()},i=u.id,d=a.viewCustomer(i),m.Customer=d.$$state}]);
"use strict";angular.module("myApp").controller("ViewFornecedorCtrl",["$scope","$http","consts","Msg","$state","Fornecedor","$stateParams",function(o,e,r,a,d,s,t){var n,c,i=this;i.Fornecedor={id:0,razaoSocial:"",cnpj:"",telefone:"",address:""},i.Filter={id:"",razaoSocial:""},i.user={login:0,senha:1},o.maskTel="(99)9999-9999",o.maskCnpj="99.999.999/9999-99",i.updateFornecedor=function(){s.updateFornecedor(i.Fornecedor)?(a.addSucess("O fornecedor foi alterado"),d.go("searchFornecedor")):a.addError("Não foi possível atualizar os dados do fornecedor"),o.contatoForm.$setPristine()},n=t.id,c=s.viewFornecedor(n),i.Fornecedor=c.$$state}]);
"use strict";angular.module("myApp").controller("ViewProductCtrl",["$scope","$http","consts","Msg","$state","Product","$stateParams",function(t,o,r,d,a,e,s){var c,u,i=this;i.Product={id:0,name:"",price:"",stock:""},i.Filter={id:"",name:""},i.updateProduct=function(){e.updateProduct(i.Product)?(d.addSucess("O produto foi alterado"),a.go("searchProduct")):d.addError("Não foi possível atualizar os dados do produto"),t.contatoForm.$setPristine()},c=s.id,u=e.viewProduct(c),i.Product=u.$$state}]);
"use strict";angular.module("myApp").controller("ViewTransactionCrtl",["$scope","$http","consts","Msg","$state","Transaction","$stateParams",function(t,o,a,e,s,r,n){var i,c,u=this;u.tr={},u.initObject={total:0,qtd:0},u.updateCustomer=function(){Customer.updateCustomer(u.Customer)?(e.addSucess("O cliente foi alterado"),s.go("searchCustomer")):e.addError("Não foi possível atualizar os dados do cliente"),t.contatoForm.$setPristine()},i=n.id,c=n.tipo,i<1||"Venda"!=c&&"Compra"!=c||r.visualizar(i,c).then(function(t){u.tr=t.data},function(t){console.log("reason :",t)})}]);
"use strict";angular.module("myApp").factory("auth",["$http","consts",function(a,e){var n=null;function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return n||(n=localStorage.getItem(e.userKey)),0<t?JSON.parse(n):n}function l(n,t,o){a.post(e.oapiUrl+"/"+n,t).then(function(t){"login"==n&&(localStorage.setItem(e.userKey,JSON.stringify(t.data)),a.defaults.headers.common.Authorization=t.data.id),o&&o(null,t.data)}).catch(function(t){o&&(console.log(t),o(t,null))})}function i(t){n=null,localStorage.removeItem(e.userKey),a.defaults.headers.common.Authorization="",t&&t(null)}return{signup:function(t,n){l("signup",t,n)},login:function(t,n){l("login",t,n)},logout:i,getUser:o,validateToken:function(t,n){t?a.post(e.oapiUrl+"/validateToken",{token:t}).then(function(t){t.data.valid?a.defaults.headers.common.Authorization=o().token:i(),n&&n(null,t.data.valid)}).catch(function(t){n&&n(t.data.errors)}):n&&n("Token inválido.")}}}]);
"use strict";angular.module("myApp").factory("Customer",["$http","consts","$q",function(s,a,n){var f=function(t,n,e,r,o){var u={idPerson:r||0,idCustomer:o||"",nome:t||"",telefone:n||"",endereco:e||""};return u};return{registerCustomer:function(r,o,u,c,i){return n(function(n,e){var t=new f(r,o,u,c,i);s.post(a.apiUrl+"/setCustomer",t).then(function(t){n(!0)}).catch(function(t){e(!1)})})},searchCustomer:function(t,n){var e={id:t,name:n};return s.post(a.apiUrl+"/getAllCustomers",e)},viewCustomer:function(r){return n(function(n,e){var t={id:r};s.post(a.apiUrl+"/getCustomer",t).then(function(t){n(t.data[0])}).catch(function(t){e(t)})})},updateCustomer:function(t){return n(function(n,e){s.post(a.apiUrl+"/updateCustomer",t.value).then(function(t){n(!0)}).catch(function(t){e(!1)})})},deleteCustomer:function(r,o){return n(function(n,e){var t={idCustomer:r,pessoa:o};s.post(a.apiUrl+"/delCustomer",t).then(function(t){n(!0)}).catch(function(t){e(!1)})})},Customer:f}}]);
"use strict";angular.module("myApp").factory("Fornecedor",["$http","consts","$q",function(u,d,o){var f=function(n,o,e,r,t){var c={idFornecedor:t||"",razaoSocial:n||"",cnpj:o||"",telefone:e||"",endereco:r||""};return c};return{registerFornecedor:function(r,t,c,i,a){return o(function(o,e){var n=new f(r,t,c,i,a);u.post(d.apiUrl+"/setFornecedor",n).then(function(n){o(!0)}).catch(function(n){e(!1)})})},searchFornecedor:function(r,t){return o(function(o,e){var n={id:r,razaoSocial:t};u.post(d.apiUrl+"/getAllFornecedor",n).then(function(n){o(n.data),console.log(n.data)}).catch(function(n){e(n)})})},viewFornecedor:function(r){return o(function(o,e){var n={id:r};u.post(d.apiUrl+"/getFornecedor",n).then(function(n){o(n.data[0])}).catch(function(n){e(n)})})},updateFornecedor:function(n){return o(function(o,e){u.post(d.apiUrl+"/updateFornecedor",n.value).then(function(n){o(!0)}).catch(function(n){e(!1)})})},deleteFornecedor:function(r){return o(function(o,e){var n={idFornecedor:r};u.post(d.apiUrl+"/delFornecedor",n).then(function(n){o(!0)}).catch(function(n){e(!1)})})},Fornecedor:f}}]);
"use strict";angular.module("myApp").factory("Msg",["toastr",function(t){function o(n,r,o){n instanceof Array?n.forEach(function(n){return t[o](n,r)}):t[o](n,r)}return{addSucess:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Sucesso";o(n,r,"success")},addError:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Erro";o(n,r,"error")},addInfo:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Informação";o(n,r,"info")},addWarn:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Atenção";o(n,r,"warning")}}}]);
"use strict";angular.module("myApp").factory("Product",["$http","consts","$q",function(r,i,n){var e=function(t,n){var c={nome:t||"",valor:n||""};return c};return{registerProduct:function(u,o){return n(function(n,c){var t=new e(u,o);r.post(i.apiUrl+"/setProduct",t).then(function(t){n(!0)}).catch(function(t){c(!1)})})},searchProduct:function(u,o){return n(function(n,c){var t={id:u,name:o};r.post(i.apiUrl+"/getAllProducts",t).then(function(t){n(t.data)}).catch(function(t){c(t)})})},viewProduct:function(u){return n(function(n,c){var t={id:u};r.post(i.apiUrl+"/getProduct",t).then(function(t){n(t.data[0])}).catch(function(t){c(t)})})},updateProduct:function(t){return n(function(n,c){r.post(i.apiUrl+"/updateProduct",t.value).then(function(t){n(!0)}).catch(function(t){c(!1)})})},deleteProduct:function(u){return n(function(n,c){var t={id:u};r.post(i.apiUrl+"/delProduct",t).then(function(t){n(!0)}).catch(function(t){c(!1)})})},Product:e}}]);
"use strict";angular.module("myApp").factory("Transaction",["$http","consts","$q",function(a,e,t){return{sell:function(r,i,c,u){return t(function(t,o){var n={cliente:r,produtos:i,vendedor:c,total:u};a.post(e.apiUrl+"/sell",n).then(function(n){t(!0)}).catch(function(n){o(!1)})})},buy:function(r,i,c){return t(function(t,o){var n={fornecedor:r,produtos:i,total:c};a.post(e.apiUrl+"/buy",n).then(function(n){t(!0)}).catch(function(n){o(!1)})})},getAllTransactions:function(){return a.post(e.apiUrl+"/getAllTransactions",{})},visualizar:function(n,t){return a.post(e.apiUrl+"/visualizarTransaction",{id:n,tipo:t})},estornar:function(n){return t(function(t,o){a.post(e.apiUrl+"/estornar",{id:n}).then(function(n){t(!0)}).catch(function(n){o(!1)})})}}}]);
"use strict";angular.module("myApp").factory("Vendedor",["$http","consts","$q",function(o,r,n){return{getAll:function(){return n(function(t,e){o.post(r.apiUrl+"/getVendedores").then(function(n){t(n.data)}).catch(function(n){e(n)})})},getVendedorVenda:function(n){return o.post(r.apiUrl+"/getVendedorVenda",{id:n})}}}]);
"use strict";angular.module("myApp").factory("Url",function(){return{userAll:function(){return"http://redmine:81/redmine/users.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},projectAll:function(){return"http://redmine:81/redmine/projects.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},usersProject:function(e){return"http://redmine:81/redmine/projects/"+e+"/memberships.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238"},validarUsuario:function(e){return"http://redmine:81/redmine/users.json?key=683ad157ea69a8e9d8b5db20782b92fd1267e238&name="+e}}});
"use strict";angular.module("myApp").factory("User",function(){return function(t,i,s,n,a,e,h){this.id=t,this.created_on=i,this.name=s,this.fistname=n,this.lastname=a,this.login=e,this.mail=h}});